{"version":3,"file":"agent-avatar.js","sourceRoot":"","sources":["../../src/elements/agent-avatar.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAC/D,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAE,MAAM,YAAY,CAAC;AAElD,OAAO,EAAE,aAAa,EAAE,MAAM,kBAAkB,CAAC;AACjD,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AAC7E,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAEpD,MAAM,OAAO,WAAY,SAAQ,mBAAmB,CAAC,UAAU,CAAC;IAAhE;QACE,wBAAwB;;QAQxB,SAAI,GAAG,EAAE,CAAC;QAOV,aAAQ,GAAG,IAAI,eAAe,CAAC,IAAI,EAAE,GAAG,EAAE,CACxC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CACxC,CAAC;IAoCJ,CAAC;IAlCC,KAAK,CAAC,YAAY;QAChB,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE;YAC9C,MAAM,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACvD;IACH,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,KAAK,WAAW;YAC/C,OAAO,IAAI,CAAA;gBACD,IAAI,CAAC,WAAW;gBAChB,IAAI,CAAC,IAAI;yBACA,CAAC;QACtB,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK;YACrB,OAAO,IAAI,CAAA;;mBAEE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM;2BACzB,IAAI,CAAC,IAAI;;OAE7B,CAAC;QACJ,OAAO,IAAI,CAAA;;uBAEQ,IAAI,CAAC,IAAI,cAAc,IAAI,CAAC,IAAI;oBACnC,CAAC;IACnB,CAAC;IAED,MAAM,KAAK,cAAc;QACvB,OAAO;YACL,gBAAgB,EAAE,aAAa;YAC/B,WAAW,EAAE,QAAQ;YACrB,aAAa,EAAE,UAAU;SAC1B,CAAC;IACJ,CAAC;;AAEM,kBAAM,GAAG,CAAC,UAAU,CAAC,CAAC;AA/C7B;IAHC,QAAQ,CAAC;QACR,SAAS,EAAE,eAAe;KAC3B,CAAC;gDAC2B;AAG7B;IADC,QAAQ,EAAE;yCACD;AAKV;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,oBAAoB,EAAE,CAAC;2CAC5B","sourcesContent":["import { AgentPubKeyB64 } from '@holochain-open-dev/core-types';\nimport { contextProvided } from '@lit-labs/context';\nimport { ScopedElementsMixin } from '@open-wc/scoped-elements';\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { profilesStoreContext } from '../context';\nimport { ProfilesStore } from '../profiles-store';\nimport { HoloIdenticon } from './holo-identicon';\nimport { lightTheme, SlAvatar, SlSkeleton } from '@scoped-elements/shoelace';\nimport { StoreSubscriber } from 'lit-svelte-stores';\n\nexport class AgentAvatar extends ScopedElementsMixin(LitElement) {\n  /** Public properties */\n\n  @property({\n    attribute: 'agent-pub-key',\n  })\n  agentPubKey!: AgentPubKeyB64;\n\n  @property()\n  size = 32;\n\n  /** Dependencies */\n\n  @contextProvided({ context: profilesStoreContext })\n  _store!: ProfilesStore;\n\n  _profile = new StoreSubscriber(this, () =>\n    this._store.profileOf(this.agentPubKey)\n  );\n\n  async firstUpdated() {\n    if (this._store.config.avatarMode === 'avatar') {\n      await this._store.fetchAgentProfile(this.agentPubKey);\n    }\n  }\n\n  render() {\n    if (this._store.config.avatarMode === 'identicon')\n      return html`<holo-identicon\n        .hash=${this.agentPubKey}\n        .size=${this.size}\n      ></holo-identicon>`;\n    if (this._profile.value)\n      return html`\n        <sl-avatar\n          .image=${this._profile.value.fields.avatar}\n          style=\"--size: ${this.size}px;\"\n        ></sl-avatar>\n      `;\n    return html`<sl-skeleton\n      effect=\"pulse\"\n      style=\"height: ${this.size}px; width: ${this.size}px\"\n    ></sl-skeleton>`;\n  }\n\n  static get scopedElements() {\n    return {\n      'holo-identicon': HoloIdenticon,\n      'sl-avatar': SlAvatar,\n      'sl-skeleton': SlSkeleton,\n    };\n  }\n\n  static styles = [lightTheme];\n}\n"]}