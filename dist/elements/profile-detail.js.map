{"version":3,"file":"profile-detail.js","sourceRoot":"","sources":["../../src/elements/profile-detail.ts"],"names":[],"mappings":"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","sourcesContent":["import { contextProvided } from '@holochain-open-dev/context';\nimport { AgentPubKeyB64, Dictionary } from '@holochain-open-dev/core-types';\nimport { ScopedElementsMixin } from '@open-wc/scoped-elements';\nimport { html, LitElement } from 'lit';\nimport { StoreSubscriber } from 'lit-svelte-stores';\nimport { property, state } from 'lit/decorators.js';\nimport { SlSkeleton } from '@scoped-elements/shoelace';\n\nimport { profilesStoreContext } from '../context';\nimport { ProfilesStore } from '../profiles-store';\nimport { sharedStyles } from './utils/shared-styles';\nimport { AgentAvatar } from './agent-avatar';\n\n/**\n * @element profile-detail\n */\nexport class ProfileDetail extends ScopedElementsMixin(LitElement) {\n  /** Public properties */\n\n  /**\n   * REQUIRED. Public key identifying the agent for which the profile should be shown\n   */\n  @property({ type: String, attribute: 'agent-pub-key' })\n  agentPubKey!: AgentPubKeyB64;\n\n  /** Dependencies */\n\n  /**\n   * `ProfilesStore` that is requested via context.\n   * Only set this property if you want to override the store requested via context.\n   */\n  @contextProvided({ context: profilesStoreContext })\n  @property({ type: Object })\n  store!: ProfilesStore;\n\n  /** Private properties */\n\n  @state()\n  private _loading = true;\n\n  private _agentProfile = new StoreSubscriber(this, () =>\n    this.store?.profileOf(this.agentPubKey)\n  );\n\n  async firstUpdated() {\n    await this.store.fetchAgentProfile(this.agentPubKey);\n    this._loading = false;\n  }\n\n  getAdditionalFields(): Dictionary<string> {\n    const fields: Dictionary<string> = {};\n\n    for (const [key, value] of Object.entries(\n      this._agentProfile.value.fields\n    )) {\n      if (key !== 'avatar') {\n        fields[key] = value;\n      }\n    }\n\n    return fields;\n  }\n\n  renderAdditionalField(fieldId: string, fieldValue: string) {\n    return html`\n      <div class=\"row\" style=\"margin-top: 16px\">\n        <span style=\"margin-right: 16px; \"> <strong>${fieldId}</strong></span>\n        <span>${fieldValue}</span>\n      </div>\n    `;\n  }\n\n  render() {\n    if (this._loading)\n      return html`\n        <div class=\"column\">\n          <div class=\"row\" style=\"align-items: center\">\n            <sl-skeleton\n              effect=\"pulse\"\n              style=\"height: 32px; width: 32px; border-radius: 50%;\"\n            ></sl-skeleton>\n            <div>\n              <sl-skeleton\n                effect=\"pulse\"\n                style=\"width: 122px; margin-left: 8px;\"\n              ></sl-skeleton>\n            </div>\n          </div>\n\n          ${this.store.config.additionalFields.map(\n            () => html`\n              <sl-skeleton\n                effect=\"pulse\"\n                style=\"width: 200px; margin-top: 16px;\"\n              ></sl-skeleton>\n            `\n          )}\n        </div>\n      `;\n\n    if (!this._agentProfile.value)\n      return html`<div\n        class=\"column\"\n        style=\"align-items: center; justify-content: center; flex: 1;\"\n      >\n        <span class=\"placeholder\">This agent hasn't created a profile yet</span>\n      </div>`;\n\n    return html`\n      <div class=\"column\">\n        <div class=\"row\" style=\"align-items: center\">\n          <agent-avatar .agentPubKey=${this.agentPubKey}></agent-avatar>\n          <span style=\"font-size: 16px; margin-left: 8px;\"\n            >${this._agentProfile.value.nickname}</span\n          >\n\n          <span style=\"flex: 1\"></span>\n\n          <slot name=\"action\"></slot>\n        </div>\n\n        ${Object.entries(this.getAdditionalFields()).map(([key, value]) =>\n          this.renderAdditionalField(key, value)\n        )}\n      </div>\n    `;\n  }\n\n  /**\n   * @ignore\n   */\n  static get scopedElements() {\n    return {\n      'agent-avatar': AgentAvatar,\n      'sl-skeleton': SlSkeleton,\n    };\n  }\n\n  static styles = [sharedStyles];\n}\n"]}