{"version":3,"file":"update-profile.js","sourceRoot":"","sources":["../../src/elements/update-profile.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAS,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAC3D,OAAO,EAAE,eAAe,EAAE,MAAM,6BAA6B,CAAC;AAC9D,OAAO,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAE/D,OAAO,EAGL,IAAI,EAGJ,gBAAgB,GACjB,MAAM,+BAA+B,CAAC;AAGvC,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAErD,OAAO,EAAE,oBAAoB,EAAE,MAAM,YAAY,CAAC;AAElD,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAE7C,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAEpD;;;GAGG;AACH,MAAM,OAAO,aAAc,SAAQ,mBAAmB,CAAC,UAAU,CAAC;IAAlE;QACE,mBAAmB;;QAUnB,yBAAyB;QAGjB,aAAQ,GAAG,IAAI,CAAC;QAEhB,eAAU,GAAG,IAAI,eAAe,CAAC,IAAI,EAAE,GAAG,EAAE,WAAC,OAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,SAAS,CAAA,EAAA,CAAC,CAAC;IAqD9E,CAAC;IAnDC,KAAK,CAAC,YAAY;QAChB,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,OAAgB;QAClC,MAAM,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAExC,IAAI,CAAC,aAAa,CAChB,IAAI,WAAW,CAAC,iBAAiB,EAAE;YACjC,MAAM,EAAE;gBACN,OAAO;aACR;YACD,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,IAAI;SACf,CAAC,CACH,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,QAAQ;YACf,OAAO,IAAI,CAAA;;;;;aAKJ,CAAC;QAEV,OAAO,IAAI,CAAA;;mBAEI,IAAI,CAAC,UAAU,CAAC,KAAK;;wBAEhB,CAAC,CAAc,EAAE,EAAE,CACjC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;;KAEzC,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,MAAM,KAAK,cAAc;QACvB,OAAO;YACL,uBAAuB,EAAE,gBAAgB;YACzC,cAAc,EAAE,WAAW;YAC3B,UAAU,EAAE,IAAI;SACjB,CAAC;IACJ,CAAC;IACD,MAAM,KAAK,MAAM;QACf,OAAO,CAAC,YAAY,CAAC,CAAC;IACxB,CAAC;CACF;AA5DC;IAFC,eAAe,CAAC,EAAE,OAAO,EAAE,oBAAoB,EAAE,CAAC;IAClD,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;4CACL;AAKtB;IADC,KAAK,EAAE;+CACgB","sourcesContent":["import { html, LitElement } from 'lit';\nimport { query, property, state } from 'lit/decorators.js';\nimport { contextProvided } from '@holochain-open-dev/context';\nimport { ScopedElementsMixin } from '@open-wc/scoped-elements';\nimport { Dictionary } from '@holochain-open-dev/core-types';\nimport {\n  TextField,\n  Button,\n  Card,\n  IconButton,\n  Fab,\n  CircularProgress,\n} from '@scoped-elements/material-web';\nimport { SlAvatar } from '@scoped-elements/shoelace';\n\nimport { sharedStyles } from './utils/shared-styles';\nimport { ProfilesStore } from '../profiles-store';\nimport { profilesStoreContext } from '../context';\nimport { resizeAndExport } from './utils/image';\nimport { EditProfile } from './edit-profile';\nimport { Profile } from '../types';\nimport { StoreSubscriber } from 'lit-svelte-stores';\n\n/**\n * @element update-profile\n * @fires profile-updated - Fired after the profile has been created. Detail will have this shape: { profile: { nickname, fields } }\n */\nexport class UpdateProfile extends ScopedElementsMixin(LitElement) {\n  /** Dependencies */\n\n  /**\n   * `ProfilesStore` that is requested via context.\n   * Only set this property if you want to override the store requested via context.\n   */\n  @contextProvided({ context: profilesStoreContext })\n  @property({ type: Object })\n  store!: ProfilesStore;\n\n  /** Private properties */\n\n  @state()\n  private _loading = true;\n\n  private _myProfile = new StoreSubscriber(this, () => this.store?.myProfile);\n\n  async firstUpdated() {\n    await this.store.fetchMyProfile();\n    this._loading = false;\n  }\n\n  async updateProfile(profile: Profile) {\n    await this.store.updateProfile(profile);\n\n    this.dispatchEvent(\n      new CustomEvent('profile-updated', {\n        detail: {\n          profile,\n        },\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  render() {\n    if (this._loading)\n      return html`<div\n        class=\"column\"\n        style=\"align-items: center; justify-content: center; flex: 1;\"\n      >\n        <mwc-circular-progress indeterminate></mwc-circular-progress>\n      </div>`;\n\n    return html`\n      <edit-profile\n        .profile=${this._myProfile.value}\n        save-profile-label=\"Update Profile\"\n        @save-profile=${(e: CustomEvent) =>\n          this.updateProfile(e.detail.profile)}\n      ></edit-profile>\n    `;\n  }\n\n  /**\n   * @ignore\n   */\n  static get scopedElements() {\n    return {\n      'mwc-circular-progress': CircularProgress,\n      'edit-profile': EditProfile,\n      'mwc-card': Card,\n    };\n  }\n  static get styles() {\n    return [sharedStyles];\n  }\n}\n"]}