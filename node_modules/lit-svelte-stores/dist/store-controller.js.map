{"version":3,"file":"store-controller.js","sourceRoot":"","sources":["../src/store-controller.ts"],"names":[],"mappings":"AAGA,MAAM,OAAO,eAAe;IAK1B,YACY,IAAqB,EACrB,KAAkB,EAClB,QAA4B;QAF5B,SAAI,GAAJ,IAAI,CAAiB;QACrB,UAAK,GAAL,KAAK,CAAa;QAClB,aAAQ,GAAR,QAAQ,CAAoB;QAEtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;IAED,aAAa;QACX,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;YACjD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,IAAI,CAAC,QAAQ;gBAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;CACF","sourcesContent":["import { Readable, Unsubscriber } from \"svelte/store\";\nimport { ReactiveController, ReactiveElement } from \"lit\";\n\nexport class StoreController<V> implements ReactiveController {\n  value!: V;\n\n  public _unsubscribe!: Unsubscriber;\n\n  constructor(\n    protected host: ReactiveElement,\n    protected store: Readable<V>,\n    protected callback?: (value: V) => any\n  ) {\n    host.addController(this);\n  }\n\n  hostConnected() {\n    this._unsubscribe = this.store.subscribe((value) => {\n      this.value = value;\n      if (this.callback) this.callback(value);\n      this.host.requestUpdate();\n    });\n  }\n\n  hostDisconnected() {\n    this._unsubscribe();\n  }\n}\n"]}