{"version":3,"file":"context-store-controller.js","sourceRoot":"","sources":["../src/context-store-controller.ts"],"names":[],"mappings":"AAAA,OAAO,EAAW,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAE7D,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAGrD,MAAM,OAAO,sBAIX,SAAQ,eAAiC;IAOzC,YACE,IAAiB,EACjB,OAAqB,EACrB,QAA2B,EAC3B,WAA2C;QAE3C,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE;YAC7B,IAAI,IAAI,CAAC,eAAe,EAAE;gBACxB,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;aACrC;YAED,IAAI,KAAK,GAAG,KAA+B,CAAC;YAC5C,IAAI,WAAW;gBAAE,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;YAE5C,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;QACpE,CAAC,CAAC,CAAC;IACL,CAAC;IApBD,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC;IACpC,CAAC;CAmBF","sourcesContent":["import { Context, ContextConsumer } from \"@lit-labs/context\";\nimport { ReactiveElement } from \"@lit/reactive-element\";\nimport { StoreController } from \"./store-controller\";\nimport { Readable } from \"svelte/store\";\n\nexport class ContextStoreController<\n  V,\n  HostElement extends ReactiveElement,\n  Ctx = Readable<V>\n> extends ContextConsumer<Ctx, HostElement> {\n  storeController!: StoreController<V>;\n\n  get value() {\n    return this.storeController.value;\n  }\n\n  constructor(\n    host: HostElement,\n    context: Context<Ctx>,\n    callback: (value: V) => any,\n    selectStore?: (context: Ctx) => Readable<V>\n  ) {\n    super(host, context, (value) => {\n      if (this.storeController) {\n        this.storeController._unsubscribe();\n      }\n\n      let store = value as unknown as Readable<V>;\n      if (selectStore) store = selectStore(value);\n\n      this.storeController = new StoreController(host, store, callback);\n    });\n  }\n}\n"]}